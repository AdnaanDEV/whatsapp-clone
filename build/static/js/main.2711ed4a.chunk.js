(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var c=a(4),s=a(2),n=a.n(s),i=a(28),o=a.n(i),r=(a(64),a(10)),d=a(31),j=a(9),l=(a(65),a(93)),h=a(91),b=a(51),u=a.n(b),m=a(38),p=a.n(m),O=a(52),x=a.n(O),f=a(37),v=a.n(f),g=(a(66),a(26)),_=(g.a.initializeApp({apiKey:"AIzaSyCZEtRZGMTadIyMWwZJA0zb2wb9LtDmriA",authDomain:"whats-app-clone-81543.firebaseapp.com",databaseURL:"https://whats-app-clone-81543.firebaseio.com",projectId:"whats-app-clone-81543",storageBucket:"whats-app-clone-81543.appspot.com",messagingSenderId:"982085142836",appId:"1:982085142836:web:00c8a35024d7b6c9673d61",measurementId:"G-SZ3N9CPE5Q"}),g.a.firestore()),N=g.a.auth(),S=new g.a.auth.GoogleAuthProvider,w=_,C=a(41),y={user:null},I="SET_USER",E=function(e,t){switch(t.type){case I:return Object(C.a)(Object(C.a)({},e),{},{user:t.payload});default:return e}},k=Object(s.createContext)(),A=function(e){var t=e.children,a=Object(s.useReducer)(E,y),n=Object(r.a)(a,2),i=n[0],o=n[1];return Object(c.jsx)(k.Provider,{value:[i,o],children:t})};var D=function(){var e,t,a=n.a.useState(""),s=Object(r.a)(a,2),i=s[0],o=s[1],d=n.a.useState(""),b=Object(r.a)(d,2),m=b[0],O=b[1],f=Object(j.f)().roomId,_=n.a.useState(""),N=Object(r.a)(_,2),S=N[0],C=N[1],y=n.a.useState([]),I=Object(r.a)(y,2),E=I[0],A=I[1],D=n.a.useContext(k),T=Object(r.a)(D,2),M=T[0];return T[1],n.a.useEffect((function(){o(Math.floor(5e3*Math.random()))}),[]),n.a.useEffect((function(){f&&(w.collection("rooms").doc(f).onSnapshot((function(e){return C(e.data().name)})),w.collection("rooms").doc(f).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return A(e.docs.map((function(e){return e.data()})))})))}),[f]),Object(c.jsxs)("div",{className:"chat",children:[Object(c.jsxs)("div",{className:"chat__header",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(i,".svg")}),Object(c.jsxs)("div",{className:"chat__headerInfo",children:[Object(c.jsx)("h3",{children:S}),Object(c.jsxs)("p",{children:[" Last seen ...",new Date(null===(e=E[E.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(c.jsxs)("div",{className:"chat__headerRight",children:[Object(c.jsx)(h.a,{children:Object(c.jsx)(v.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(u.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{})})]})]}),Object(c.jsx)("div",{className:"chat__body",children:E.map((function(e){var t;return Object(c.jsxs)("p",{className:"chat__message ".concat(e.name===M.user.displayName&&"chat__receiver","  "),children:[Object(c.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(c.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(c.jsxs)("div",{className:"chat__footer",children:[Object(c.jsx)(x.a,{}),Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{value:m,onChange:function(e){return O(e.target.value)},placeholder:"Type a message",type:"text"}),Object(c.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),w.collection("rooms").doc(f).collection("messages").add({message:m,name:M.user.displayName,timestamp:g.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Send a message"})]})]})]})},T=a(53),M=a.n(T),R=a(54),L=a.n(R);a(76),a(77);var P=function(e){var t,a=e.id,i=e.name,o=e.addNewChat,j=Object(s.useState)(""),h=Object(r.a)(j,2),b=h[0],u=h[1],m=Object(s.useState)(""),p=Object(r.a)(m,2),O=p[0],x=p[1];return n.a.useEffect((function(){u(Math.floor(5e3*Math.random()))}),[]),n.a.useEffect((function(){a&&w.collection("rooms").doc(a).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){x(e.docs.map((function(e){return e.data()})))}))}),[a]),o?Object(c.jsx)("div",{onClick:function(){var e=prompt("Enter room name");e&&w.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(c.jsx)("h2",{children:"Add new chat"})}):Object(c.jsx)(d.b,{to:"/rooms/".concat(a),children:Object(c.jsxs)("div",{className:"sidebarChat",children:[Object(c.jsx)(l.a,{src:"https://avatars.dicebear.com/api/avataaars/".concat(b,".svg")}),Object(c.jsxs)("div",{className:"sidebarChat__info",children:[Object(c.jsx)("h2",{children:i}),Object(c.jsx)("p",{children:null===(t=O[0])||void 0===t?void 0:t.message})]})]})})};var B=function(){var e=n.a.useState([]),t=Object(r.a)(e,2),a=t[0],i=t[1],o=Object(s.useContext)(k),d=Object(r.a)(o,2),j=d[0].user;return d[1],n.a.useEffect((function(){var e=w.collection("rooms").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(c.jsxs)("div",{className:"sidebar",children:[Object(c.jsxs)("div",{className:"sidebar__header",children:[Object(c.jsx)(l.a,{src:null===j||void 0===j?void 0:j.photoURL}),Object(c.jsxs)("div",{className:"sidebar__headerRight",children:[Object(c.jsx)(h.a,{children:Object(c.jsx)(M.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(L.a,{})}),Object(c.jsx)(h.a,{children:Object(c.jsx)(p.a,{})})]})]}),Object(c.jsx)("div",{className:"sidebar__search",children:Object(c.jsxs)("div",{className:"sidebar__searchContainer",children:[Object(c.jsx)(v.a,{}),Object(c.jsx)("input",{type:"text",placeholder:"Search or start new chat !"})]})}),Object(c.jsxs)("div",{className:"sidebar__chats",children:[Object(c.jsx)(P,{addNewChat:!0}),a.map((function(e){return Object(c.jsx)(P,{id:e.id,name:e.data.name},e.id)}))]})]})},F=a(92);a(78);function U(){var e=n.a.useContext(k),t=Object(r.a)(e,2),a=(t[0],t[1]);return Object(c.jsx)("div",{className:"login",children:Object(c.jsxs)("div",{className:"login__container",children:[Object(c.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/766px-WhatsApp.svg.png"}),Object(c.jsx)("div",{className:"login__text",children:Object(c.jsx)("h1",{children:"Sign in to whatsapp"})}),Object(c.jsx)(F.a,{type:"submit",onClick:function(){N.signInWithPopup(S).then((function(e){console.log("*******************&&&&&&&&&&&&&&&&&&&&&"),console.log(e),a({type:I,payload:e.user})})).catch((function(e){console.log(e)}))},children:"Sign In with google"})]})})}var W=function(){var e=Object(s.useContext)(k),t=Object(r.a)(e,2),a=t[0];return t[1],Object(c.jsx)("div",{className:"app",children:a.user?Object(c.jsx)("div",{className:"app__body",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(B,{}),Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/rooms/:roomId",children:Object(c.jsx)(D,{})}),Object(c.jsx)(j.a,{path:"/",children:Object(c.jsx)(D,{})})]})]})}):Object(c.jsx)(U,{})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,94)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};o.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(A,{initialState:y,reducer:E,children:Object(c.jsx)(W,{})})}),document.getElementById("root")),Z()}},[[79,1,2]]]);
//# sourceMappingURL=main.2711ed4a.chunk.js.map